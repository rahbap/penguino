<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aura Farmer: Cosmic Shockwave</title>
    <style>
        body {
            background-color: #0f0f10;
            color: #fff;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            overflow: hidden;
            user-select: none;
            cursor: crosshair;
        }

        /* --- UI LAYER --- */
        #ui-layer {
            position: absolute;
            top: 0; left: 0; width: 100%;
            padding: 20px;
            z-index: 100;
            pointer-events: none;
            display: flex;
            justify-content: space-between;
            box-sizing: border-box;
        }

        .stats-box {
            background: rgba(0, 0, 0, 0.85);
            padding: 15px 25px;
            border-radius: 12px;
            border: 1px solid #444;
            pointer-events: auto;
            text-align: left;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
        }

        h1 { margin: 0 0 5px 0; font-size: 1.2rem; color: #a29bfe; letter-spacing: 2px; }
        .aura-count { font-size: 2.5rem; color: #fff; font-weight: 900; text-shadow: 0 0 15px rgba(162, 155, 254, 0.5); }
        .sub-stat { color: #ccc; font-size: 0.9rem; margin-top: 5px; font-family: monospace; }
        
        .rank-display {
            position: absolute; top: 20px; right: 20px;
            font-size: 1.5rem; font-weight: bold; text-align: right;
            text-shadow: 2px 2px 0 #000;
        }

        /* --- UPGRADES PANEL --- */
        #upgrade-panel {
            position: absolute; bottom: 20px; left: 50%;
            transform: translateX(-50%);
            display: flex; gap: 10px; z-index: 100;
            background: rgba(0,0,0,0.6);
            padding: 15px; border-radius: 20px;
            backdrop-filter: blur(5px);
            border: 1px solid #333;
        }

        .btn {
            background: #2d3436; border: 1px solid #636e72; color: white;
            padding: 10px 15px; cursor: pointer; border-radius: 8px;
            transition: 0.1s; min-width: 140px; text-align: left;
            position: relative; overflow: hidden;
        }
        
        .btn:hover { background: #3d3d3d; border-color: #fff; transform: translateY(-3px); }
        .btn:active { transform: translateY(0); }
        .btn h3 { margin: 0; font-size: 0.9rem; color: #ffeb3b; }
        .btn span { display: block; font-size: 0.7rem; color: #aaa; margin-top: 4px; }

        /* --- PLAYER --- */
        #player-container {
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 0; height: 0; z-index: 10;
        }

        .player-stickman {
            position: absolute; transform: translate(-50%, -50%);
            width: 40px; height: 80px; background: #fff; border-radius: 4px; z-index: 12;
        }
        .player-stickman::before {
            content: ''; position: absolute; top: -35px; left: 50%; transform: translateX(-50%);
            width: 30px; height: 30px; background: #fff; border-radius: 50%;
        }

        /* --- AURA TIERS --- */
        .aura-visual {
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%); z-index: 5;
            pointer-events: none; transition: all 0.5s;
        }

        /* 1. Focus */
        .form-1 .aura-visual {
            width: 120px; height: 160px; border-radius: 50%;
            background: radial-gradient(circle, rgba(0,100,255,0.6) 0%, transparent 70%);
            box-shadow: 0 0 20px #00f;
        }
        /* 2. Super Gold */
        .form-2 .aura-visual {
            width: 180px; height: 240px;
            background: linear-gradient(to top, #ffcc00, #ff5500);
            clip-path: polygon(50% 0%, 65% 30%, 100% 20%, 75% 55%, 90% 90%, 50% 75%, 10% 90%, 25% 55%, 0% 20%, 35% 30%);
            animation: shake 0.2s infinite; filter: drop-shadow(0 0 15px orange);
        }
        /* 3. God Blue */
        .form-3 .aura-visual {
            width: 200px; height: 280px;
            background: conic-gradient(from 0deg, #00ffff, #0055ff, #00ffff);
            border-radius: 40% 60% 70% 30% / 40% 50% 60% 50%;
            animation: spin-blob 2s infinite linear; filter: blur(5px) drop-shadow(0 0 20px cyan);
        }
        /* 4. Ultra Beam */
        .form-4 .aura-visual {
            width: 300px; height: 300vh;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.9), #fff, rgba(255,255,255,0.9), transparent);
            filter: drop-shadow(0 0 50px white); animation: beam-pulse 0.5s infinite alternate;
        }
        .form-4 .player-stickman { background: #000; box-shadow: inset 0 0 10px #fff; border: 2px solid #fff; animation: float 2s infinite ease-in-out; }
        .form-4 .player-stickman::before { background: #000; border: 2px solid #fff; }

        /* 5. VOID KING (New) */
        .form-5 .aura-visual {
            width: 400px; height: 400px; border-radius: 50%;
            background: #000;
            box-shadow: inset 0 0 60px #4b0082, 0 0 50px #000;
            border: 2px solid #8a2be2;
            animation: void-pulse 1s infinite alternate;
        }
        .form-5 .player-stickman { background: #000; border: none; box-shadow: 0 0 20px #8a2be2; }
        .form-5 .player-stickman::before { background: #000; box-shadow: 0 0 20px #8a2be2; }

        /* 6. OMNI-GOD (New) */
        .form-6 .aura-visual {
            width: 500px; height: 500px;
            background: conic-gradient(#f00, #ff0, #0f0, #0ff, #00f, #f0f, #f00);
            border-radius: 50%;
            filter: blur(20px); opacity: 0.5;
            animation: spin-blob 1s infinite linear;
        }
        .form-6::after {
            content: ''; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 300px; height: 300px; border: 5px solid #fff; border-radius: 50%;
            box-shadow: 0 0 50px #fff;
        }
        .form-6 .player-stickman { background: #fff; animation: float 1s infinite ease-in-out; }

        /* --- ENEMIES --- */
        .person {
            position: absolute; width: 30px; height: 50px; z-index: 50;
            transition: transform 0.05s; pointer-events: none; /* We handle clicks via JS AOE now */
        }
        .person::before { /* Head */
            content: ''; position: absolute; top: -20px; left: 50%; transform: translateX(-50%);
            width: 20px; height: 20px; border-radius: 50%; background: #ffdbac;
        }

        /* Enemy Styles */
        .type-hobo { background: #5d4037; } .type-hobo::before { background: #d7ccc8; }
        .type-normie { background: #0984e3; } .type-normie::after { content: ''; position: absolute; bottom: 0; width: 100%; height: 25px; background: #636e72; }
        .type-cool { background: #000; box-shadow: 0 0 10px rgba(0,0,0,0.5); } .type-cool::before { background: #ffdbac; border: 2px solid #000; } .type-cool::after { content: ''; position: absolute; top: 5px; left: 50%; transform: translateX(-50%); width: 15px; height: 8px; border-bottom: 3px solid gold; border-radius: 50%; }
        .type-god { background: #fff; box-shadow: 0 0 20px cyan; animation: float 1s infinite; } .type-god::before { background: #fff; box-shadow: 0 0 10px cyan; }

        /* NEW ENEMIES */
        .type-glitch { background: #0f0; box-shadow: 2px 0 red, -2px 0 blue; animation: shake 0.1s infinite; } 
        .type-glitch::before { background: #000; border: 1px solid #0f0; }

        .type-void { background: #000; box-shadow: 0 0 20px #8a2be2; opacity: 0.9; }
        .type-void::before { background: #000; border: 1px solid #8a2be2; }
        .type-void::after { content: ''; position: absolute; top: -15px; left: 8px; width: 4px; height: 4px; background: red; box-shadow: 10px 0 red; } /* Red Eyes */

        .type-cosmic { background: #1a237e; overflow: hidden; box-shadow: 0 0 15px #fff; }
        .type-cosmic::after { content: 'âœ¨'; font-size: 10px; position: absolute; top: 5px; left: 5px; color: #fff; }
        .type-cosmic::before { background: radial-gradient(circle, #fff, #1a237e); }

        /* Effects */
        .float-text {
            position: absolute; color: #ffff00; font-weight: 900; font-size: 1.2rem;
            pointer-events: none; animation: floatUp 0.6s forwards; z-index: 200;
            text-shadow: 2px 2px 0 #000;
        }

        .shockwave {
            position: absolute; border-radius: 50%; border: 2px solid rgba(255, 255, 255, 0.8);
            background: rgba(255, 255, 255, 0.1); transform: translate(-50%, -50%);
            pointer-events: none; z-index: 90;
            animation: ripple 0.3s forwards;
        }

        @keyframes ripple { 0% { width: 0; height: 0; opacity: 1; } 100% { width: var(--size); height: var(--size); opacity: 0; } }
        @keyframes shake { 0% { transform: translate(-50%, -50%) rotate(0deg); } 25% { transform: translate(-52%, -48%) rotate(-2deg); } 75% { transform: translate(-48%, -52%) rotate(2deg); } 100% { transform: translate(-50%, -50%) rotate(0deg); } }
        @keyframes spin-blob { 0% { transform: translate(-50%, -50%) rotate(0deg); } 100% { transform: translate(-50%, -50%) rotate(360deg); } }
        @keyframes beam-pulse { 0% { opacity: 0.8; width: 280px; } 100% { opacity: 1; width: 320px; } }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        @keyframes void-pulse { 0% { transform: translate(-50%, -50%) scale(1); } 100% { transform: translate(-50%, -50%) scale(0.95); } }
        @keyframes floatUp { 0% { opacity: 1; transform: translateY(0) scale(1); } 100% { opacity: 0; transform: translateY(-40px) scale(1.5); } }

    </style>
</head>
<body>

    <div id="ui-layer">
        <div class="stats-box">
            <h1>Aura Storage</h1>
            <div class="aura-count" id="score">0</div>
            <div class="sub-stat" id="aps-stat">Passive: 0/s</div>
        </div>
        <div class="rank-display" id="rank-text" style="color: #888;">Rank: NOBODY</div>
    </div>

    <div id="player-container" class="form-0">
        <div class="aura-visual"></div>
        <div class="player-stickman"></div>
    </div>

    <div id="upgrade-panel">
        <button class="btn" onclick="upgradeRadius()">
            <h3>Shockwave Size</h3>
            <span id="cost-radius">Cost: 50 (Radius: 50px)</span>
        </button>
        <button class="btn" onclick="upgradeRate()">
            <h3>Clout Magnet</h3>
            <span id="cost-rate">Cost: 100 (Spawn Rate)</span>
        </button>
        <button class="btn" onclick="upgradeLuck()">
            <h3>Vibe Check</h3>
            <span id="cost-luck">Cost: 200 (Luck Lvl: 1)</span>
        </button>
        <button class="btn" onclick="upgradePassive()">
            <h3>Meditation</h3>
            <span id="cost-passive">Cost: 500 (+5/s)</span>
        </button>
    </div>

    <script>
        // --- GAME VARIABLES ---
        let aura = 0;
        let aps = 0;
        let spawnRate = 2000; 
        let luckLevel = 1; 
        let clickRadius = 50; // New: AOE size
        
        // Costs
        let costRate = 100;
        let costLuck = 200;
        let costPassive = 500;
        let costRadius = 50;

        // Elements
        const scoreEl = document.getElementById('score');
        const apsEl = document.getElementById('aps-stat');
        const rankEl = document.getElementById('rank-text');
        const playerCont = document.getElementById('player-container');
        
        // --- CLICK (AOE) LOGIC ---
        // Instead of clicking divs, we click the screen and check distance
        document.body.addEventListener('mousedown', (e) => {
            // Prevent clicking buttons from triggering game click
            if(e.target.closest('button')) return;

            // 1. Create Visual Shockwave
            const wave = document.createElement('div');
            wave.className = 'shockwave';
            wave.style.left = e.clientX + 'px';
            wave.style.top = e.clientY + 'px';
            wave.style.setProperty('--size', (clickRadius * 2) + 'px');
            document.body.appendChild(wave);
            setTimeout(() => wave.remove(), 300);

            // 2. Check collisions with all people
            const people = document.querySelectorAll('.person');
            let hitSomething = false;

            people.forEach(p => {
                const rect = p.getBoundingClientRect();
                const pX = rect.left + rect.width / 2;
                const pY = rect.top + rect.height / 2;
                
                // Distance formula
                const dist = Math.sqrt(Math.pow(e.clientX - pX, 2) + Math.pow(e.clientY - pY, 2));

                if (dist < clickRadius + 20) { // Radius + enemy size buffer
                    hitEnemy(p);
                    hitSomething = true;
                }
            });
        });

        function hitEnemy(p) {
            const val = parseInt(p.dataset.value);
            addAura(val);
            
            // Visual feedback on enemy
            p.style.transform = "scale(0.8) brightness(1.5)";
            setTimeout(() => { p.style.transform = "scale(1)"; }, 100);

            // Text pop-up (Centered on enemy)
            const rect = p.getBoundingClientRect();
            createFloatText(rect.left, rect.top, `+${val}`);
        }

        // --- SPAWNER LOGIC ---
        function spawnPerson() {
            const p = document.createElement('div');
            p.classList.add('person');

            const roll = Math.random() * 100;
            const luckMod = (luckLevel - 1) * 3; 

            // TYPES & VALUES
            let type = "hobo";
            let value = 1;
            let speed = 2;

            // New Tier Logic
            if (roll < (0.2 + luckMod/5) && roll < 5) { // Cosmic (Ultra Rare)
                type = "cosmic"; p.classList.add('type-cosmic');
                value = 500 * luckLevel; speed = 5;
            } else if (roll < (1 + luckMod/3) && roll < 10) { // Void (Rare)
                type = "void"; p.classList.add('type-void');
                value = 150 * luckLevel; speed = 1; // Slow but valuable
            } else if (roll < (3 + luckMod/2) && roll < 20) { // Glitch
                type = "glitch"; p.classList.add('type-glitch');
                value = 50 * luckLevel; speed = 8; // Very fast
            } else if (roll < (8 + luckMod) && roll < 40) { // Ascended
                type = "god"; p.classList.add('type-god');
                value = 25; speed = 4;
            } else if (roll < (20 + luckMod) && roll < 60) { // Drip God
                type = "cool"; p.classList.add('type-cool');
                value = 10; speed = 3;
            } else if (roll < (50 + luckMod)) { // Normie
                type = "normie"; p.classList.add('type-normie');
                value = 3; speed = 2.5;
            } else { // Hobo
                type = "hobo"; p.classList.add('type-hobo');
                value = 1; speed = 1.5;
            }

            p.dataset.value = value; // Store value for click

            // Position & Move
            const side = Math.floor(Math.random() * 4);
            const w = window.innerWidth;
            const h = window.innerHeight;
            let sx, sy, ex, ey;

            if (side===0) { sx=Math.random()*w; sy=-60; ex=w-sx; ey=h+60; }
            else if (side===1) { sx=w+60; sy=Math.random()*h; ex=-60; ey=h-sy; }
            else if (side===2) { sx=Math.random()*w; sy=h+60; ex=Math.random()*w; ey=-60; }
            else { sx=-60; sy=Math.random()*h; ex=w+60; ey=Math.random()*h; }

            p.style.left = sx + 'px';
            p.style.top = sy + 'px';
            document.body.appendChild(p);

            let x=sx, y=sy;
            const angle = Math.atan2(ey-sy, ex-sx);
            const vx = Math.cos(angle) * speed;
            const vy = Math.sin(angle) * speed;

            const moveInterval = setInterval(() => {
                x += vx; y += vy;
                p.style.left = x + 'px';
                p.style.top = y + 'px';
                if ((x<-100 || x>w+100 || y<-100 || y>h+100) && (Math.abs(x-sx)>100)) {
                    p.remove(); clearInterval(moveInterval);
                }
            }, 16);
        }

        // --- UPGRADE FUNCTIONS ---
        function addAura(amount) {
            aura += amount;
            updateDisplay();
        }

        function upgradeRadius() {
            if (aura >= costRadius) {
                aura -= costRadius;
                clickRadius += 15;
                costRadius = Math.floor(costRadius * 1.5);
                updateDisplay();
            }
        }

        function upgradeRate() {
            if (aura >= costRate) {
                aura -= costRate;
                spawnRate = Math.max(100, spawnRate - 150);
                costRate = Math.floor(costRate * 1.5);
                resetSpawner();
                updateDisplay();
            }
        }

        function upgradeLuck() {
            if (aura >= costLuck) {
                aura -= costLuck;
                luckLevel++;
                costLuck = Math.floor(costLuck * 1.8);
                updateDisplay();
            }
        }

        function upgradePassive() {
            if (aura >= costPassive) {
                aura -= costPassive;
                aps += 5 + Math.floor(aps * 0.2);
                costPassive = Math.floor(costPassive * 1.4);
                updateDisplay();
            }
        }

        // --- CORE SYSTEMS ---
        function updateDisplay() {
            scoreEl.innerText = Math.floor(aura);
            apsEl.innerText = `Passive: ${aps}/s`;

            document.getElementById('cost-radius').innerText = `Cost: ${costRadius} (Radius: ${clickRadius}px)`;
            document.getElementById('cost-rate').innerText = `Cost: ${costRate} (Rate: ${(1000/spawnRate).toFixed(1)}/s)`;
            document.getElementById('cost-luck').innerText = `Cost: ${costLuck} (Lvl: ${luckLevel})`;
            document.getElementById('cost-passive').innerText = `Cost: ${costPassive} (+${5 + Math.floor(aps * 0.2)}/s)`;

            // Visual Transformations
            playerCont.className = '';
            if (aura < 100) { rankEl.innerText = "Rank: NOBODY"; rankEl.style.color = "#888"; }
            else if (aura < 500) { playerCont.classList.add('form-1'); rankEl.innerText = "Rank: RISING STAR"; rankEl.style.color = "#48dbfb"; }
            else if (aura < 2500) { playerCont.classList.add('form-2'); rankEl.innerText = "Rank: GANGSTER"; rankEl.style.color = "#ff9f43"; }
            else if (aura < 10000) { playerCont.classList.add('form-3'); rankEl.innerText = "Rank: DIVINE"; rankEl.style.color = "#0abde3"; }
            else if (aura < 50000) { playerCont.classList.add('form-4'); rankEl.innerText = "Rank: INFINITE RIZZ"; rankEl.style.color = "#fff"; }
            else if (aura < 250000) { playerCont.classList.add('form-5'); rankEl.innerText = "Rank: VOID EMPEROR"; rankEl.style.color = "#8a2be2"; }
            else { playerCont.classList.add('form-6'); rankEl.innerText = "Rank: OMNI-GOD"; rankEl.style.color = "#ff00ff"; }
        }

        function createFloatText(x, y, text) {
            const f = document.createElement('div');
            f.innerText = text; f.className = 'float-text';
            f.style.left = x + 'px'; f.style.top = y + 'px';
            document.body.appendChild(f);
            setTimeout(() => f.remove(), 600);
        }

        setInterval(() => { if (aps > 0) addAura(aps); }, 1000);

        let spawnerInt;
        function resetSpawner() {
            clearInterval(spawnerInt);
            spawnerInt = setInterval(spawnPerson, spawnRate);
        }

        resetSpawner();
        updateDisplay();
    </script>
</body>
</html>
